"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const WordGroup_1 = require("../../beans/WordGroup");
const StorageUtil_1 = require("../../utils/StorageUtil");
let key = '0';
Page({
    data: {
        word_name: "",
        ph_en: "",
        ph_am: "",
        index: 0,
        parts: [],
        wordList: new Array()
    },
    onLoad(options) {
        let groupid = options.groupid;
        let word = options.word;
        let wordGroup = this.getWordGroupById(groupid);
        let wordList = wordGroup.getList();
        let index = this.getIndex(word, wordList);
        this.setData({
            index: index,
            wordList: wordList
        });
        this.flushPage(word);
    },
    flushPage: function (word) {
        let content = this;
        wx.request({
            url: 'https://dict-co.iciba.com/api/dictionary.php?type=json&w=' + word + '&key=' + key,
            success: function (res) {
                let data = res.data;
                let word_name = data.word_name;
                let ph_en = data.symbols[0].ph_en;
                let ph_am = data.symbols[0].ph_am;
                let parts = new Array();
                for (let i = 0; i < data.symbols[0].parts.length; i++) {
                    let part = data.symbols[0].parts[i].part;
                    let mean = '';
                    for (let j = 0; j < data.symbols[0].parts[i].means.length; j++) {
                        mean += data.symbols[0].parts[i].means[j] + 'ï¼›';
                    }
                    parts.push({
                        part: part,
                        mean: mean
                    });
                }
                content.setData({
                    word_name: word_name,
                    ph_en: ph_en,
                    ph_am: ph_am,
                    parts: parts
                });
            }
        });
    },
    getWordGroupById(id) {
        let wordGroupList = StorageUtil_1.StorageUtil.getWordGroup();
        for (let i = 0; i < wordGroupList.length; i++) {
            if (wordGroupList[i].getId() === id) {
                return wordGroupList[i];
            }
        }
        return new WordGroup_1.WordGroup();
    },
    getIndex(word, wordList) {
        for (let i = 0; i < wordList.length; i++) {
            if (word === wordList[i]) {
                return i;
            }
        }
        return 0;
    },
    next() {
        let wordList = this.data.wordList;
        let index = this.data.index + 1;
        if (index === wordList.length) {
            index = 0;
        }
        this.setData({
            index: index
        });
        this.flushPage(wordList[index]);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVhbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1lYW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxxREFBaUQ7QUFFakQseURBQW1EO0FBTW5ELElBQUksR0FBRyxHQUFXLEdBQUcsQ0FBQTtBQUVyQixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFFSixTQUFTLEVBQUUsRUFBRTtRQUViLEtBQUssRUFBRSxFQUFFO1FBRVQsS0FBSyxFQUFFLEVBQUU7UUFFVCxLQUFLLEVBQUUsQ0FBQztRQUVSLEtBQUssRUFBRSxFQUFFO1FBRVQsUUFBUSxFQUFDLElBQUksS0FBSyxFQUFRO0tBQzNCO0lBQ0QsTUFBTSxDQUFDLE9BQVc7UUFDaEIsSUFBSSxPQUFPLEdBQVUsT0FBTyxDQUFDLE9BQU8sQ0FBQTtRQUNwQyxJQUFJLElBQUksR0FBUSxPQUFPLENBQUMsSUFBSSxDQUFBO1FBQzVCLElBQUksU0FBUyxHQUFjLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQTtRQUN6RCxJQUFJLFFBQVEsR0FBZ0IsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQy9DLElBQUksS0FBSyxHQUFVLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQy9DLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixLQUFLLEVBQUMsS0FBSztZQUNYLFFBQVEsRUFBQyxRQUFRO1NBQ2xCLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDdEIsQ0FBQztJQUlELFNBQVMsRUFBRSxVQUFVLElBQVc7UUFDOUIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFBO1FBQ2xCLEVBQUUsQ0FBQyxPQUFPLENBQUM7WUFDVCxHQUFHLEVBQUUsMkRBQTJELEdBQUcsSUFBSSxHQUFHLE9BQU8sR0FBQyxHQUFHO1lBQ3JGLE9BQU8sRUFBRSxVQUFVLEdBQU87Z0JBQ3hCLElBQUksSUFBSSxHQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUE7Z0JBQ3ZCLElBQUksU0FBUyxHQUFVLElBQUksQ0FBQyxTQUFTLENBQUE7Z0JBQ3JDLElBQUksS0FBSyxHQUFVLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO2dCQUN4QyxJQUFJLEtBQUssR0FBVSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQTtnQkFDeEMsSUFBSSxLQUFLLEdBQWMsSUFBSSxLQUFLLEVBQUUsQ0FBQTtnQkFDbEMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDckQsSUFBSSxJQUFJLEdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFBO29CQUM1QyxJQUFJLElBQUksR0FBVSxFQUFFLENBQUE7b0JBQ3BCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO3dCQUM5RCxJQUFJLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQTtxQkFDaEQ7b0JBQ0QsS0FBSyxDQUFDLElBQUksQ0FBQzt3QkFDVCxJQUFJLEVBQUUsSUFBSTt3QkFDVixJQUFJLEVBQUUsSUFBSTtxQkFDWCxDQUFDLENBQUE7aUJBQ0g7Z0JBQ0QsT0FBTyxDQUFDLE9BQVEsQ0FBQztvQkFDZixTQUFTLEVBQUUsU0FBUztvQkFDcEIsS0FBSyxFQUFFLEtBQUs7b0JBQ1osS0FBSyxFQUFFLEtBQUs7b0JBQ1osS0FBSyxFQUFFLEtBQUs7aUJBQ2IsQ0FBQyxDQUFBO1lBQ0osQ0FBQztTQUNGLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFJRCxnQkFBZ0IsQ0FBQyxFQUFTO1FBQ3hCLElBQUksYUFBYSxHQUFvQix5QkFBVyxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQy9ELEtBQUksSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFDLENBQUMsR0FBQyxhQUFhLENBQUMsTUFBTSxFQUFDLENBQUMsRUFBRSxFQUFDO1lBQ3JDLElBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxLQUFHLEVBQUUsRUFBQztnQkFDL0IsT0FBTyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUE7YUFDeEI7U0FDRjtRQUNELE9BQU8sSUFBSSxxQkFBUyxFQUFFLENBQUE7SUFDeEIsQ0FBQztJQUlELFFBQVEsQ0FBQyxJQUFTLEVBQUMsUUFBb0I7UUFDckMsS0FBSSxJQUFJLENBQUMsR0FBQyxDQUFDLEVBQUMsQ0FBQyxHQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUMsQ0FBQyxFQUFFLEVBQUM7WUFDaEMsSUFBRyxJQUFJLEtBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDO2dCQUNwQixPQUFPLENBQUMsQ0FBQTthQUNUO1NBQ0Y7UUFDRCxPQUFPLENBQUMsQ0FBQTtJQUNWLENBQUM7SUFNRCxJQUFJO1FBQ0YsSUFBSSxRQUFRLEdBQWdCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFBO1FBQzlDLElBQUksS0FBSyxHQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFDLENBQUMsQ0FBQTtRQUlwQyxJQUFHLEtBQUssS0FBRyxRQUFRLENBQUMsTUFBTSxFQUFDO1lBQ3pCLEtBQUssR0FBRyxDQUFDLENBQUE7U0FDVjtRQUNELElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixLQUFLLEVBQUMsS0FBSztTQUNaLENBQUMsQ0FBQTtRQUNGLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUE7SUFDakMsQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdvcmRHcm91cCB9IGZyb20gJy4uLy4uL2JlYW5zL1dvcmRHcm91cCdcclxuaW1wb3J0IHsgV29yZCB9IGZyb20gJy4uLy4uL2JlYW5zL1dvcmQnXHJcbmltcG9ydCB7U3RvcmFnZVV0aWx9IGZyb20gJy4uLy4uL3V0aWxzL1N0b3JhZ2VVdGlsJ1xyXG5cclxuLy/ph5HlsbHor43pnLjnmoTljZXor41hcGnnmoRrZXlcclxuLy/ljrvlrpjnvZHlj5Hpgq7ku7bnu5nph5HlsbHor43pnLhcclxuLy/ku5bku6zkvJrlm57lpI3pgq7ku7blubbnu5nlh7prZXlcclxuLy/msLjkuYXlhY3otLnkuI3pmZDorr/pl67mrKHmlbDnmoTvvIznnJ/nmoToia/lv4NcclxubGV0IGtleTogc3RyaW5nID0gJzAnXHJcblxyXG5QYWdlKHtcclxuICBkYXRhOiB7XHJcbiAgICAvL+WNleivjVxyXG4gICAgd29yZF9uYW1lOiBcIlwiLFxyXG4gICAgLy/oi7HlvI/lj5Hpn7NcclxuICAgIHBoX2VuOiBcIlwiLFxyXG4gICAgLy/nvo7lvI/lj5Hpn7NcclxuICAgIHBoX2FtOiBcIlwiLFxyXG4gICAgLy/lvZPliY3ljZXor43ntKLlvJVcclxuICAgIGluZGV4OiAwLFxyXG4gICAgLy/or43mhI/liJfooahcclxuICAgIHBhcnRzOiBbXSxcclxuICAgIC8v5Y2V6K+N5YiX6KGoXHJcbiAgICB3b3JkTGlzdDpuZXcgQXJyYXk8V29yZD4oKVxyXG4gIH0sXHJcbiAgb25Mb2FkKG9wdGlvbnM6YW55KSB7XHJcbiAgICBsZXQgZ3JvdXBpZDpzdHJpbmcgPSBvcHRpb25zLmdyb3VwaWRcclxuICAgIGxldCB3b3JkOldvcmQgPSBvcHRpb25zLndvcmRcclxuICAgIGxldCB3b3JkR3JvdXA6IFdvcmRHcm91cCA9IHRoaXMuZ2V0V29yZEdyb3VwQnlJZChncm91cGlkKVxyXG4gICAgbGV0IHdvcmRMaXN0OiBBcnJheTxXb3JkPiA9IHdvcmRHcm91cC5nZXRMaXN0KClcclxuICAgIGxldCBpbmRleDpudW1iZXIgPSB0aGlzLmdldEluZGV4KHdvcmQsd29yZExpc3QpXHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgaW5kZXg6aW5kZXgsXHJcbiAgICAgIHdvcmRMaXN0OndvcmRMaXN0XHJcbiAgICB9KVxyXG4gICAgdGhpcy5mbHVzaFBhZ2Uod29yZClcclxuICB9LFxyXG4gIC8qKlxyXG4gICog6K6+572u6aG16Z2i5Y+C5pWwXHJcbiAgKi9cclxuICBmbHVzaFBhZ2U6IGZ1bmN0aW9uICh3b3JkOnN0cmluZykge1xyXG4gICAgbGV0IGNvbnRlbnQgPSB0aGlzXHJcbiAgICB3eC5yZXF1ZXN0KHtcclxuICAgICAgdXJsOiAnaHR0cHM6Ly9kaWN0LWNvLmljaWJhLmNvbS9hcGkvZGljdGlvbmFyeS5waHA/dHlwZT1qc29uJnc9JyArIHdvcmQgKyAnJmtleT0nK2tleSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlczphbnkpIHtcclxuICAgICAgICBsZXQgZGF0YTphbnkgPSByZXMuZGF0YVxyXG4gICAgICAgIGxldCB3b3JkX25hbWU6c3RyaW5nID0gZGF0YS53b3JkX25hbWVcclxuICAgICAgICBsZXQgcGhfZW46c3RyaW5nID0gZGF0YS5zeW1ib2xzWzBdLnBoX2VuXHJcbiAgICAgICAgbGV0IHBoX2FtOnN0cmluZyA9IGRhdGEuc3ltYm9sc1swXS5waF9hbVxyXG4gICAgICAgIGxldCBwYXJ0czpBcnJheTxhbnk+ID0gbmV3IEFycmF5KClcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEuc3ltYm9sc1swXS5wYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbGV0IHBhcnQ6YW55ID0gZGF0YS5zeW1ib2xzWzBdLnBhcnRzW2ldLnBhcnRcclxuICAgICAgICAgIGxldCBtZWFuOnN0cmluZyA9ICcnXHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGEuc3ltYm9sc1swXS5wYXJ0c1tpXS5tZWFucy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBtZWFuICs9IGRhdGEuc3ltYm9sc1swXS5wYXJ0c1tpXS5tZWFuc1tqXSArICfvvJsnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBwYXJ0cy5wdXNoKHtcclxuICAgICAgICAgICAgcGFydDogcGFydCxcclxuICAgICAgICAgICAgbWVhbjogbWVhblxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgY29udGVudC5zZXREYXRhISh7XHJcbiAgICAgICAgICB3b3JkX25hbWU6IHdvcmRfbmFtZSxcclxuICAgICAgICAgIHBoX2VuOiBwaF9lbixcclxuICAgICAgICAgIHBoX2FtOiBwaF9hbSxcclxuICAgICAgICAgIHBhcnRzOiBwYXJ0c1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDpgJrov4dJROiOt+WPluWNleivjeWIhue7hFxyXG4gICAqL1xyXG4gIGdldFdvcmRHcm91cEJ5SWQoaWQ6c3RyaW5nKTpXb3JkR3JvdXB7XHJcbiAgICBsZXQgd29yZEdyb3VwTGlzdDpBcnJheTxXb3JkR3JvdXA+ID0gU3RvcmFnZVV0aWwuZ2V0V29yZEdyb3VwKClcclxuICAgIGZvcihsZXQgaT0wO2k8d29yZEdyb3VwTGlzdC5sZW5ndGg7aSsrKXtcclxuICAgICAgaWYod29yZEdyb3VwTGlzdFtpXS5nZXRJZCgpPT09aWQpe1xyXG4gICAgICAgIHJldHVybiB3b3JkR3JvdXBMaXN0W2ldXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgV29yZEdyb3VwKClcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluW9k+WJjeWNleivjeWcqOWNleivjeWIl+ihqOS4reeahOe0ouW8lVxyXG4gICAqL1xyXG4gIGdldEluZGV4KHdvcmQ6V29yZCx3b3JkTGlzdDpBcnJheTxXb3JkPik6bnVtYmVye1xyXG4gICAgZm9yKGxldCBpPTA7aTx3b3JkTGlzdC5sZW5ndGg7aSsrKXtcclxuICAgICAgaWYod29yZD09PXdvcmRMaXN0W2ldKXtcclxuICAgICAgICByZXR1cm4gaVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gMFxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog5YiH5o2i5Y2V6K+N5oyJ6ZKu54K55Ye75LqL5Lu2XHJcbiAgICog5bCG5b2T5YmN5Y2V6K+N57Si5byVKzFcclxuICAgKiDlubbliLfmlrDlvZPliY3pobXpnaJcclxuICAgKi9cclxuICBuZXh0KCl7XHJcbiAgICBsZXQgd29yZExpc3Q6IEFycmF5PFdvcmQ+ID0gdGhpcy5kYXRhLndvcmRMaXN0XHJcbiAgICBsZXQgaW5kZXg6bnVtYmVyID0gdGhpcy5kYXRhLmluZGV4KzFcclxuICAgIC8v5aaC5p6c5LiL5LiA5Liq5Y2V6K+N55qE57Si5byV6LaF6L+H5LqG5Y2V6K+N5YiX6KGo55qE6ZW/5bqmXHJcbiAgICAvL+ivtOaYjuW3sue7j+WIsOS6huacgOWQjuS4gOS4quWNleivjeS6hlxyXG4gICAgLy/liJnntKLlvJXot7Plm57nrKzkuIDkuKrljZXor41cclxuICAgIGlmKGluZGV4PT09d29yZExpc3QubGVuZ3RoKXtcclxuICAgICAgaW5kZXggPSAwXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgaW5kZXg6aW5kZXhcclxuICAgIH0pXHJcbiAgICB0aGlzLmZsdXNoUGFnZSh3b3JkTGlzdFtpbmRleF0pXHJcbiAgfVxyXG59KSJdfQ==