"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var WordGroup_1 = require("../../beans/WordGroup");
var StorageUtil_1 = require("../../utils/StorageUtil");
var key = '0';
Page({
    data: {
        word_name: "",
        ph_en: "",
        ph_am: "",
        index: 0,
        parts: [],
        wordList: new Array()
    },
    onLoad: function (options) {
        var groupid = options.groupid;
        var word = options.word;
        var wordGroup = this.getWordGroupById(groupid);
        var wordList = wordGroup.getList();
        var index = this.getIndex(word, wordList);
        this.setData({
            index: index,
            wordList: wordList
        });
        this.flushPage(word);
    },
    flushPage: function (word) {
        var content = this;
        wx.request({
            url: 'https://dict-co.iciba.com/api/dictionary.php?type=json&w=' + word + '&key=' + key,
            success: function (res) {
                var data = res.data;
                var word_name = data.word_name;
                var ph_en = data.symbols[0].ph_en;
                var ph_am = data.symbols[0].ph_am;
                var parts = new Array();
                for (var i = 0; i < data.symbols[0].parts.length; i++) {
                    var part = data.symbols[0].parts[i].part;
                    var mean = '';
                    for (var j = 0; j < data.symbols[0].parts[i].means.length; j++) {
                        mean += data.symbols[0].parts[i].means[j] + 'ï¼›';
                    }
                    parts.push({
                        part: part,
                        mean: mean
                    });
                }
                content.setData({
                    word_name: word_name,
                    ph_en: ph_en,
                    ph_am: ph_am,
                    parts: parts
                });
            }
        });
    },
    getWordGroupById: function (id) {
        var wordGroupList = StorageUtil_1.StorageUtil.getWordGroup();
        for (var i = 0; i < wordGroupList.length; i++) {
            if (wordGroupList[i].getId() === id) {
                return wordGroupList[i];
            }
        }
        return new WordGroup_1.WordGroup();
    },
    getIndex: function (word, wordList) {
        for (var i = 0; i < wordList.length; i++) {
            if (word === wordList[i]) {
                return i;
            }
        }
        return 0;
    },
    next: function () {
        var wordList = this.data.wordList;
        var index = this.data.index + 1;
        if (index === wordList.length) {
            index = 0;
        }
        this.setData({
            index: index
        });
        this.flushPage(wordList[index]);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVhbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1lYW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBaUQ7QUFFakQsdURBQW1EO0FBTW5ELElBQUksR0FBRyxHQUFXLEdBQUcsQ0FBQTtBQUVyQixJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFFSixTQUFTLEVBQUUsRUFBRTtRQUViLEtBQUssRUFBRSxFQUFFO1FBRVQsS0FBSyxFQUFFLEVBQUU7UUFFVCxLQUFLLEVBQUUsQ0FBQztRQUVSLEtBQUssRUFBRSxFQUFFO1FBRVQsUUFBUSxFQUFDLElBQUksS0FBSyxFQUFRO0tBQzNCO0lBQ0QsTUFBTSxFQUFOLFVBQU8sT0FBVztRQUNoQixJQUFJLE9BQU8sR0FBVSxPQUFPLENBQUMsT0FBTyxDQUFBO1FBQ3BDLElBQUksSUFBSSxHQUFRLE9BQU8sQ0FBQyxJQUFJLENBQUE7UUFDNUIsSUFBSSxTQUFTLEdBQWMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3pELElBQUksUUFBUSxHQUFnQixTQUFTLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDL0MsSUFBSSxLQUFLLEdBQVUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUMsUUFBUSxDQUFDLENBQUE7UUFDL0MsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLEtBQUssRUFBQyxLQUFLO1lBQ1gsUUFBUSxFQUFDLFFBQVE7U0FDbEIsQ0FBQyxDQUFBO1FBQ0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN0QixDQUFDO0lBSUQsU0FBUyxFQUFFLFVBQVUsSUFBVztRQUM5QixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUE7UUFDbEIsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULEdBQUcsRUFBRSwyREFBMkQsR0FBRyxJQUFJLEdBQUcsT0FBTyxHQUFDLEdBQUc7WUFDckYsT0FBTyxFQUFFLFVBQVUsR0FBTztnQkFDeEIsSUFBSSxJ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QUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFBO0lBQ2pDLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXb3JkR3JvdXAgfSBmcm9tICcuLi8uLi9iZWFucy9Xb3JkR3JvdXAnXHJcbmltcG9ydCB7IFdvcmQgfSBmcm9tICcuLi8uLi9iZWFucy9Xb3JkJ1xyXG5pbXBvcnQge1N0b3JhZ2VVdGlsfSBmcm9tICcuLi8uLi91dGlscy9TdG9yYWdlVXRpbCdcclxuXHJcbi8v6YeR5bGx6K+N6Zy455qE5Y2V6K+NYXBp55qEa2V5XHJcbi8v5Y675a6Y572R5Y+R6YKu5Lu257uZ6YeR5bGx6K+N6Zy4XHJcbi8v5LuW5Lus5Lya5Zue5aSN6YKu5Lu25bm257uZ5Ye6a2V5XHJcbi8v5rC45LmF5YWN6LS55LiN6ZmQ6K6/6Zeu5qyh5pWw55qE77yM55yf55qE6Imv5b+DXHJcbmxldCBrZXk6IHN0cmluZyA9ICcwJ1xyXG5cclxuUGFnZSh7XHJcbiAgZGF0YToge1xyXG4gICAgLy/ljZXor41cclxuICAgIHdvcmRfbmFtZTogXCJcIixcclxuICAgIC8v6Iux5byP5Y+R6Z+zXHJcbiAgICBwaF9lbjogXCJcIixcclxuICAgIC8v576O5byP5Y+R6Z+zXHJcbiAgICBwaF9hbTogXCJcIixcclxuICAgIC8v5b2T5YmN5Y2V6K+N57Si5byVXHJcbiAgICBpbmRleDogMCxcclxuICAgIC8v6K+N5oSP5YiX6KGoXHJcbiAgICBwYXJ0czogW10sXHJcbiAgICAvL+WNleivjeWIl+ihqFxyXG4gICAgd29yZExpc3Q6bmV3IEFycmF5PFdvcmQ+KClcclxuICB9LFxyXG4gIG9uTG9hZChvcHRpb25zOmFueSkge1xyXG4gICAgbGV0IGdyb3VwaWQ6c3RyaW5nID0gb3B0aW9ucy5ncm91cGlkXHJcbiAgICBsZXQgd29yZDpXb3JkID0gb3B0aW9ucy53b3JkXHJcbiAgICBsZXQgd29yZEdyb3VwOiBXb3JkR3JvdXAgPSB0aGlzLmdldFdvcmRHcm91cEJ5SWQoZ3JvdXBpZClcclxuICAgIGxldCB3b3JkTGlzdDogQXJyYXk8V29yZD4gPSB3b3JkR3JvdXAuZ2V0TGlzdCgpXHJcbiAgICBsZXQgaW5kZXg6bnVtYmVyID0gdGhpcy5nZXRJbmRleCh3b3JkLHdvcmRMaXN0KVxyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGluZGV4OmluZGV4LFxyXG4gICAgICB3b3JkTGlzdDp3b3JkTGlzdFxyXG4gICAgfSlcclxuICAgIHRoaXMuZmx1c2hQYWdlKHdvcmQpXHJcbiAgfSxcclxuICAvKipcclxuICAqIOiuvue9rumhtemdouWPguaVsFxyXG4gICovXHJcbiAgZmx1c2hQYWdlOiBmdW5jdGlvbiAod29yZDpzdHJpbmcpIHtcclxuICAgIGxldCBjb250ZW50ID0gdGhpc1xyXG4gICAgd3gucmVxdWVzdCh7XHJcbiAgICAgIHVybDogJ2h0dHBzOi8vZGljdC1jby5pY2liYS5jb20vYXBpL2RpY3Rpb25hcnkucGhwP3R5cGU9anNvbiZ3PScgKyB3b3JkICsgJyZrZXk9JytrZXksXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXM6YW55KSB7XHJcbiAgICAgICAgbGV0IGRhdGE6YW55ID0gcmVzLmRhdGFcclxuICAgICAgICBsZXQgd29yZF9uYW1lOnN0cmluZyA9IGRhdGEud29yZF9uYW1lXHJcbiAgICAgICAgbGV0IHBoX2VuOnN0cmluZyA9IGRhdGEuc3ltYm9sc1swXS5waF9lblxyXG4gICAgICAgIGxldCBwaF9hbTpzdHJpbmcgPSBkYXRhLnN5bWJvbHNbMF0ucGhfYW1cclxuICAgICAgICBsZXQgcGFydHM6QXJyYXk8YW55PiA9IG5ldyBBcnJheSgpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnN5bWJvbHNbMF0ucGFydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCBwYXJ0OmFueSA9IGRhdGEuc3ltYm9sc1swXS5wYXJ0c1tpXS5wYXJ0XHJcbiAgICAgICAgICBsZXQgbWVhbjpzdHJpbmcgPSAnJ1xyXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXRhLnN5bWJvbHNbMF0ucGFydHNbaV0ubWVhbnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgbWVhbiArPSBkYXRhLnN5bWJvbHNbMF0ucGFydHNbaV0ubWVhbnNbal0gKyAn77ybJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcGFydHMucHVzaCh7XHJcbiAgICAgICAgICAgIHBhcnQ6IHBhcnQsXHJcbiAgICAgICAgICAgIG1lYW46IG1lYW5cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnRlbnQuc2V0RGF0YSEoe1xyXG4gICAgICAgICAgd29yZF9uYW1lOiB3b3JkX25hbWUsXHJcbiAgICAgICAgICBwaF9lbjogcGhfZW4sXHJcbiAgICAgICAgICBwaF9hbTogcGhfYW0sXHJcbiAgICAgICAgICBwYXJ0czogcGFydHNcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgLyoqXHJcbiAgICog6YCa6L+HSUTojrflj5bljZXor43liIbnu4RcclxuICAgKi9cclxuICBnZXRXb3JkR3JvdXBCeUlkKGlkOnN0cmluZyk6V29yZEdyb3Vwe1xyXG4gICAgbGV0IHdvcmRHcm91cExpc3Q6QXJyYXk8V29yZEdyb3VwPiA9IFN0b3JhZ2VVdGlsLmdldFdvcmRHcm91cCgpXHJcbiAgICBmb3IobGV0IGk9MDtpPHdvcmRHcm91cExpc3QubGVuZ3RoO2krKyl7XHJcbiAgICAgIGlmKHdvcmRHcm91cExpc3RbaV0uZ2V0SWQoKT09PWlkKXtcclxuICAgICAgICByZXR1cm4gd29yZEdyb3VwTGlzdFtpXVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFdvcmRHcm91cCgpXHJcbiAgfSxcclxuICAvKipcclxuICAgKiDojrflj5blvZPliY3ljZXor43lnKjljZXor43liJfooajkuK3nmoTntKLlvJVcclxuICAgKi9cclxuICBnZXRJbmRleCh3b3JkOldvcmQsd29yZExpc3Q6QXJyYXk8V29yZD4pOm51bWJlcntcclxuICAgIGZvcihsZXQgaT0wO2k8d29yZExpc3QubGVuZ3RoO2krKyl7XHJcbiAgICAgIGlmKHdvcmQ9PT13b3JkTGlzdFtpXSl7XHJcbiAgICAgICAgcmV0dXJuIGlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIDBcclxuICB9LFxyXG4gIC8qKlxyXG4gICAqIOWIh+aNouWNleivjeaMiemSrueCueWHu+S6i+S7tlxyXG4gICAqIOWwhuW9k+WJjeWNleivjee0ouW8lSsxXHJcbiAgICog5bm25Yi35paw5b2T5YmN6aG16Z2iXHJcbiAgICovXHJcbiAgbmV4dCgpe1xyXG4gICAgbGV0IHdvcmRMaXN0OiBBcnJheTxXb3JkPiA9IHRoaXMuZGF0YS53b3JkTGlzdFxyXG4gICAgbGV0IGluZGV4Om51bWJlciA9IHRoaXMuZGF0YS5pbmRleCsxXHJcbiAgICAvL+WmguaenOS4i+S4gOS4quWNleivjeeahOe0ouW8lei2hei/h+S6huWNleivjeWIl+ihqOeahOmVv+W6plxyXG4gICAgLy/or7TmmI7lt7Lnu4/liLDkuobmnIDlkI7kuIDkuKrljZXor43kuoZcclxuICAgIC8v5YiZ57Si5byV6Lez5Zue56ys5LiA5Liq5Y2V6K+NXHJcbiAgICBpZihpbmRleD09PXdvcmRMaXN0Lmxlbmd0aCl7XHJcbiAgICAgIGluZGV4ID0gMFxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGluZGV4OmluZGV4XHJcbiAgICB9KVxyXG4gICAgdGhpcy5mbHVzaFBhZ2Uod29yZExpc3RbaW5kZXhdKVxyXG4gIH1cclxufSkiXX0=