"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var StorageUtil_1 = require("../../utils/StorageUtil");
var WordGroup_1 = require("../../beans/WordGroup");
var papaparse_1 = require("../../utils/papaparse");
var StateEnum;
(function (StateEnum) {
    StateEnum[StateEnum["WORD_UNFOLD_STATE"] = 0] = "WORD_UNFOLD_STATE";
    StateEnum[StateEnum["WORD_FOLD_STATE"] = 1] = "WORD_FOLD_STATE";
    StateEnum[StateEnum["ADD_GROUP_STATE"] = 2] = "ADD_GROUP_STATE";
    StateEnum[StateEnum["ADD_WORD_STATE"] = 3] = "ADD_WORD_STATE";
    StateEnum[StateEnum["BATCH_ADD_STATE"] = 4] = "BATCH_ADD_STATE";
})(StateEnum || (StateEnum = {}));
Page({
    data: {
        addWord: '',
        groupid: '',
        addGroupName: '',
        State: StateEnum,
        textAreaCount: 0,
        textAreaValue: '',
        wordGroupList: new Array(),
        curState: StateEnum.WORD_UNFOLD_STATE,
        preState: StateEnum.WORD_UNFOLD_STATE
    },
    onLoad: function () {
        this.flushPageData();
    },
    onShow: function () {
        this.flushPageData();
    },
    translateStateTo: function (nextState) {
        var preData = this.data.curState;
        this.setData({
            curState: nextState,
            preData: preData
        });
    },
    flushPageData: function () {
        var wordGroupList = StorageUtil_1.StorageUtil.getWordGroup();
        this.setData({
            wordGroupList: wordGroupList
        });
    },
    toAddGroup: function () {
        this.translateStateTo(StateEnum.ADD_GROUP_STATE);
    },
    saveAddGroup: function () {
        var wordGroup = new WordGroup_1.WordGroup();
        wordGroup.setCount(0);
        wordGroup.setName(this.data.addGroupName);
        StorageUtil_1.StorageUtil.addWordGroup(wordGroup);
        this.translateStateTo(StateEnum.WORD_UNFOLD_STATE);
        this.setData({
            addGroupName: ''
        });
        this.flushPageData();
    },
    cancelAddGroup: function () {
        this.translateStateTo(StateEnum.WORD_UNFOLD_STATE);
    },
    addGroupNameChanged: function (e) {
        this.setData({
            addGroupName: e.detail.value
        });
    },
    foldWordGroup: function (e) {
        var tapid = e.currentTarget.id;
        var groupid = this.data.groupid;
        if (groupid === tapid) {
            groupid = "";
            this.translateStateTo(StateEnum.WORD_UNFOLD_STATE);
        }
        else {
            groupid = tapid;
            this.translateStateTo(StateEnum.WORD_FOLD_STATE);
        }
        this.setData({
            groupid: groupid
        });
    },
    toAddWord: function () {
        this.translateStateTo(StateEnum.ADD_WORD_STATE);
    },
    addWordChanged: function (e) {
        this.setData({
            addWord: e.detail.value,
            groupid: e.currentTarget.id
        });
    },
    saveAddWord: function () {
        var wordGroup = new WordGroup_1.WordGroup();
        var word = this.data.addWord;
        wordGroup.setId(this.data.groupid);
        StorageUtil_1.StorageUtil.addWord(wordGroup, word);
        this.translateStateTo(StateEnum.WORD_FOLD_STATE);
        this.setData({
            addWord: ''
        });
        this.flushPageData();
    },
    cancelAddWord: function () {
        this.translateStateTo(StateEnum.WORD_FOLD_STATE);
        this.setData({
            addWord: ''
        });
    },
    toAddWords: function () {
        this.translateStateTo(StateEnum.BATCH_ADD_STATE);
    },
    textAreaInput: function (e) {
        this.setData({
            textAreaValue: e.detail.value,
            textAreaCount: e.detail.value.length
        });
    },
    saveAddWords: function () {
        var words = this.data.textAreaValue;
        var wordList = papaparse_1.parse(words).data;
        var wordGroup = new WordGroup_1.WordGroup();
        wordGroup.setId(this.data.groupid);
        for (var i = 0; i < wordList.length; i++) {
            for (var j = 0; j < wordList[i].length; j++) {
                var word = wordList[i][j];
                StorageUtil_1.StorageUtil.addWord(wordGroup, word);
            }
        }
        this.translateStateTo(StateEnum.WORD_FOLD_STATE);
        this.setData({
            textAreaCount: 0,
            textAreaValue: ''
        });
        this.flushPageData();
    },
    cancelAddWords: function () {
        this.translateStateTo(StateEnum.WORD_FOLD_STATE);
        this.setData({
            textAreaCount: 0,
            textAreaValue: ''
        });
    },
    toDeleteWordGroup: function () {
        wx.navigateTo({
            url: '../delete/delete'
        });
    },
    toDeleteWord: function () {
        var that = this;
        wx.navigateTo({
            url: '../delete/delete?groupid=' + that.data.groupid
        });
    },
    listen: function () {
        var that = this;
        wx.navigateTo({
            url: '../listen/listen?groupid=' + that.data.groupid
        });
        return false;
    },
    mean: function (e) {
        var word = e.currentTarget.id;
        var groupid = this.data.groupid;
        wx.navigateTo({
            url: '../mean/mean?groupid=' + groupid + '&word=' + word
        });
    },
    onShareAppMessage: function () {
        return {
            title: '每一次听写，为了离梦想更近',
            path: '/pages/index/index',
            imageUrl: "http://img1.ph.126.net/gtigWEVlA6XbXE9aFrB0ew==/2098114476501923011.jpg"
        };
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVEQUFtRDtBQUNuRCxtREFBaUQ7QUFFakQsbURBQTJDO0FBVzNDLElBQUssU0FNSjtBQU5ELFdBQUssU0FBUztJQUNaLG1FQUFxQixDQUFBO0lBQ3JCLCtEQUFtQixDQUFBO0lBQ25CLCtEQUFtQixDQUFBO0lBQ25CLDZEQUFrQixDQUFBO0lBQ2xCLCtEQUFtQixDQUFBO0FBQ3JCLENBQUMsRUFOSSxTQUFTLEtBQVQsU0FBUyxRQU1iO0FBRUQsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBRUosT0FBTyxFQUFDLEVBQUU7UUFFVixPQUFPLEVBQUMsRUFBRTtRQUVWLFlBQVksRUFBRSxFQUFFO1FBRWhCLEtBQUssRUFBRSxTQUFTO1FBRWhCLGFBQWEsRUFBRSxDQUFDO1FBRWhCLGFBQWEsRUFBRSxFQUFFO1FBRWpCLGFBQWEsRUFBQyxJQUFJLEtBQUssRUFBYTtRQUVwQyxRQUFRLEVBQUUsU0FBUyxDQUFDLGlCQUFpQjtRQUVyQyxRQUFRLEVBQUMsU0FBUyxDQUFDLGlCQUFpQjtLQUNyQztJQUNELE1BQU07UUFFSixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUE7SUFDdEIsQ0FBQztJQUNELE1BQU07UUFHSixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUE7SUFDdEIsQ0FBQztJQU9ELGdCQUFnQixFQUFoQixVQUFpQixTQUFvQjtRQUNuQyxJQUFJLE9BQU8sR0FBYSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQTtRQUMxQyxJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osUUFBUSxFQUFFLFNBQVM7WUFDbkIsT0FBTyxFQUFDLE9BQU87U0FDaEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUlELGFBQWEsRUFBYjtRQUNFLElBQUksYUFBYSxHQUFvQix5QkFBVyxDQUFDLFlBQVksRUFBRSxDQUFBO1FBQy9ELElBQUksQ0FBQyxP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QUFLLEVBQUUsZUFBZTtZQUN0QixJQUFJLEVBQUUsb0JBQW9CO1lBQzFCLFFBQVEsRUFBRSx5RUFBeUU7U0FDcEYsQ0FBQTtJQUNILENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvL+iOt+WPluW6lOeUqOWunuS+i1xuaW1wb3J0IHtTdG9yYWdlVXRpbH0gZnJvbSAnLi4vLi4vdXRpbHMvU3RvcmFnZVV0aWwnXG5pbXBvcnQgeyBXb3JkR3JvdXAgfSBmcm9tICcuLi8uLi9iZWFucy9Xb3JkR3JvdXAnXG5pbXBvcnQgeyBXb3JkIH0gZnJvbSAnLi4vLi4vYmVhbnMvV29yZCdcbmltcG9ydCB7cGFyc2V9IGZyb20gJy4uLy4uL3V0aWxzL3BhcGFwYXJzZSdcblxuLyoqXG4gKiDlnKjov5nkuKrpobXpnaLkuK3vvIzmnInlvojlpJrlpI3mnYLnmoTmk43kvZxcbiAqIOe7j+W4uOimgeagueaNruW9k+WJjeaJgOWkhOeahOeKtuaAgeadpeWGs+WumuaYvuekuuS7gOS5iFxuICog5oiW6ICF5qC55o2u5b2T5YmN55qE54q25oCB5p2l5Yaz5a6a5oyJ6ZKu55qE5Yqf6IO95piv5LuA5LmIXG4gKiDmiYDku6Xmg7PliLDkuobnlKjmnInpmZDnirbmgIHmnLpcbiAqIFxuICog6L+Z6YeM5YWI5a6a5LmJ5LqG5LiA5Liq5p6a5Li+XG4gKiDmnaXkv53lrZjpobXpnaLnmoTmiYDmnInnirbmgIFcbiAqLyBcbmVudW0gU3RhdGVFbnVtIHtcbiAgV09SRF9VTkZPTERfU1RBVEUgPSAwLC8v5Y2V6K+N5YiX6KGo5pyq5bGV5byA54q25oCBXG4gIFdPUkRfRk9MRF9TVEFURSA9IDEsLy/ljZXor43liJfooajlsZXlvIDnirbmgIFcbiAgQUREX0dST1VQX1NUQVRFID0gMiwvL+a3u+WKoOWIhue7hOeKtuaAgVxuICBBRERfV09SRF9TVEFURSA9IDMsLy/mt7vliqDljZXor43nirbmgIFcbiAgQkFUQ0hfQUREX1NUQVRFID0gNC8v5om56YeP5re75Yqg5Y2V6K+N54q25oCBXG59XG5cblBhZ2Uoe1xuICBkYXRhOiB7XG4gICAgLy/kv53lrZjmt7vliqDljZXor43nirbmgIHkuIvovpPlhaXnmoTljZXor41cbiAgICBhZGRXb3JkOicnLFxuICAgIC8v5b2T5YmN5bGV5byA55qE5Y2V6K+N5YiG57uESURcbiAgICBncm91cGlkOicnLFxuICAgIC8v55So5oi36L6T5YWl55qE5re75Yqg5YiG57uE5ZCN56ewXG4gICAgYWRkR3JvdXBOYW1lOiAnJyxcbiAgICAvL+eKtuaAgeaemuS4vlxuICAgIFN0YXRlOiBTdGF0ZUVudW0sXG4gICAgLy/mibnph4/mt7vliqDljZXor43ovpPlhaXnmoTlrZfmlbDnu5/orqFcbiAgICB0ZXh0QXJlYUNvdW50OiAwLFxuICAgIC8v5om56YeP5re75Yqg5Y2V6K+N6L6T5YWl55qE5YaF5a65XG4gICAgdGV4dEFyZWFWYWx1ZTogJycsXG4gICAgLy/ljZXor43liIbnu4TliJfooahcbiAgICB3b3JkR3JvdXBMaXN0Om5ldyBBcnJheTxXb3JkR3JvdXA+KCksXG4gICAgLy/lvZPliY3nirbmgIFcbiAgICBjdXJTdGF0ZTogU3RhdGVFbnVtLldPUkRfVU5GT0xEX1NUQVRFLFxuICAgIC8v5LiK5LiA5Liq54q25oCBXG4gICAgcHJlU3RhdGU6U3RhdGVFbnVtLldPUkRfVU5GT0xEX1NUQVRFXG4gIH0sXG4gIG9uTG9hZCgpIHtcbiAgICAvL+mhtemdouWKoOi9veeahOaXtuWAmeWIt+aWsOS4gOasoemhtemdolxuICAgIHRoaXMuZmx1c2hQYWdlRGF0YSgpXG4gIH0sXG4gIG9uU2hvdygpe1xuICAgIC8v6aG16Z2i5pi+56S655qE5pe25YCZ5YaN5Yi35paw5LiA5qyh6aG16Z2iXG4gICAgLy/kuLrkuobliKDpmaTljZXor43lkI7mrKHpobXpnaLog73oh6rliqjlkIzmraVcbiAgICB0aGlzLmZsdXNoUGFnZURhdGEoKVxuICB9LFxuICAvKipcbiAgICog54q25oCB6L2s56e75Ye95pWwXG4gICAqIOWPr+S7peWwhuW9k+WJjeeKtuaAgei9rOenu+WIsG5leHRTYXRlXG4gICAqIOW9k+WJjeeKtuaAgeS/neWtmOWIsHByZVN0YXRlXG4gICAqIOS7peWkh+acieS6m+WcsOaWueaBouWkjeeKtuaAgeimgeeUqOWIsFxuICAgKi9cbiAgdHJhbnNsYXRlU3RhdGVUbyhuZXh0U3RhdGU6IFN0YXRlRW51bSkge1xuICAgIGxldCBwcmVEYXRhOlN0YXRlRW51bSA9IHRoaXMuZGF0YS5jdXJTdGF0ZVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgY3VyU3RhdGU6IG5leHRTdGF0ZSxcbiAgICAgIHByZURhdGE6cHJlRGF0YVxuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDliLfmlrDpobXpnaLmlbDmja7vvIzmr4/mrKHmlbDmja7mnInlj5jljJbpnIDopoHosIPnlKjmraTmlrnms5XliLfmlrDkuIDkuIvnlYzpnaJcbiAgICovXG4gIGZsdXNoUGFnZURhdGEoKXtcbiAgICBsZXQgd29yZEdyb3VwTGlzdDpBcnJheTxXb3JkR3JvdXA+ID0gU3RvcmFnZVV0aWwuZ2V0V29yZEdyb3VwKClcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHdvcmRHcm91cExpc3Q6d29yZEdyb3VwTGlzdFxuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDmt7vliqDliIbnu4TmjInpkq7ngrnlh7vkuovku7blpITnkIZcbiAgICog54K55Ye75re75Yqg5YiG57uE5ZCOXG4gICAqIOeKtuaAgei9rOenu+WIsOa3u+WKoOWIhue7hOeKtuaAgVxuICAgKi9cbiAgdG9BZGRHcm91cCgpIHtcbiAgICB0aGlzLnRyYW5zbGF0ZVN0YXRlVG8oU3RhdGVFbnVtLkFERF9HUk9VUF9TVEFURSlcbiAgfSxcbiAgLyoqXG4gICAqIOS/neWtmOa3u+WKoOWIhue7hOaMiemSrueCueWHu+S6i+S7tlxuICAgKiDngrnlh7vkv53lrZjlkI5cbiAgICogMS7kv53lrZjliIbnu4TliLDliIbnu4TliJfooahcbiAgICogMi7mm7TmlrDpobXpnaLmlbDmja5cbiAgICogMy7lsIbnirbmgIHovaznp7vliLDljZXor43liJfooajmnKrlsZXlvIDnirbmgIFcbiAgICovXG4gIHNhdmVBZGRHcm91cCgpIHtcbiAgICBsZXQgd29yZEdyb3VwOldvcmRHcm91cCA9IG5ldyBXb3JkR3JvdXAoKVxuICAgIHdvcmRHcm91cC5zZXRDb3VudCgwKVxuICAgIHdvcmRHcm91cC5zZXROYW1lKHRoaXMuZGF0YS5hZGRHcm91cE5hbWUpXG4gICAgU3RvcmFnZVV0aWwuYWRkV29yZEdyb3VwKHdvcmRHcm91cClcbiAgICB0aGlzLnRyYW5zbGF0ZVN0YXRlVG8oU3RhdGVFbnVtLldPUkRfVU5GT0xEX1NUQVRFKVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgYWRkR3JvdXBOYW1lOicnXG4gICAgfSlcbiAgICB0aGlzLmZsdXNoUGFnZURhdGEoKVxuICB9LFxuICAvKipcbiAgICog5Y+W5raI5re75Yqg5YiG57uE5oyJ6ZKu54K55Ye75LqL5Lu2XG4gICAqIOeCueWHu+WPlua2iOWQjlxuICAgKiDnirbmgIHovaznp7vliLDljZXor43liJfooajmnKrlsZXlvIDnirbmgIFcbiAgICovXG4gIGNhbmNlbEFkZEdyb3VwKCl7XG4gICAgdGhpcy50cmFuc2xhdGVTdGF0ZVRvKFN0YXRlRW51bS5XT1JEX1VORk9MRF9TVEFURSlcbiAgfSxcbiAgLy/mt7vliqDliIbnu4TovpPlhaXmoYbovpPlhaXkuovku7blpITnkIZcbiAgYWRkR3JvdXBOYW1lQ2hhbmdlZChlOmFueSl7XG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBhZGRHcm91cE5hbWU6ZS5kZXRhaWwudmFsdWVcbiAgICB9KVxuICB9LFxuICAvKipcbiAgICog5bGV5byA5omA54K55Ye755qE5Y2V6K+N5YiX6KGoXG4gICAqIOW5tuaUtui1t+WFtuWug+WNleivjeWIl+ihqFxuICAgKiDlpoLmnpzngrnlh7vnmoTljZXor43liJfooajmnKzouqvlsLHmmK/lsZXlvIDnmoRcbiAgICog6YKj5LmI5bCx5pS26LW35omA5pyJ55qE5Y2V6K+N5YiX6KGoXG4gICAqIOmhtemdoueahOeKtuaAgeS7juWxleW8gOaAgeWPmOaIkOacquWxleW8gOaAgVxuICAgKi9cbiAgZm9sZFdvcmRHcm91cChlOmFueSl7XG4gICAgbGV0IHRhcGlkOnN0cmluZyA9IGUuY3VycmVudFRhcmdldC5pZFxuICAgIGxldCBncm91cGlkOnN0cmluZyA9IHRoaXMuZGF0YS5ncm91cGlkXG4gICAgaWYgKGdyb3VwaWQgPT09IHRhcGlkKXtcbiAgICAgIGdyb3VwaWQgPSBcIlwiXG4gICAgICB0aGlzLnRyYW5zbGF0ZVN0YXRlVG8oU3RhdGVFbnVtLldPUkRfVU5GT0xEX1NUQVRFKVxuICAgIH0gZWxzZSB7XG4gICAgICBncm91cGlkID0gdGFwaWRcbiAgICAgIHRoaXMudHJhbnNsYXRlU3RhdGVUbyhTdGF0ZUVudW0uV09SRF9GT0xEX1NUQVRFKVxuICAgIH1cbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGdyb3VwaWQ6Z3JvdXBpZFxuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDpobXpnaLlj5jmiJDmt7vliqDljZXor43nirbmgIFcbiAgICovXG4gIHRvQWRkV29yZCgpe1xuICAgIHRoaXMudHJhbnNsYXRlU3RhdGVUbyhTdGF0ZUVudW0uQUREX1dPUkRfU1RBVEUpXG4gIH0sXG4gIC8qKlxuICAgKiDmt7vliqDljZXor43ovpPlhaXmoYbkuovku7blpITnkIZcbiAgICovXG4gIGFkZFdvcmRDaGFuZ2VkKGU6YW55KXtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGFkZFdvcmQ6ZS5kZXRhaWwudmFsdWUsXG4gICAgICBncm91cGlkOmUuY3VycmVudFRhcmdldC5pZFxuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDkv53lrZjmt7vliqDljZXor41cbiAgICovXG4gIHNhdmVBZGRXb3JkKCl7XG4gICAgbGV0IHdvcmRHcm91cDpXb3JkR3JvdXAgPSBuZXcgV29yZEdyb3VwKClcbiAgICBsZXQgd29yZDpXb3JkID0gdGhpcy5kYXRhLmFkZFdvcmRcbiAgICB3b3JkR3JvdXAuc2V0SWQodGhpcy5kYXRhLmdyb3VwaWQpXG4gICAgU3RvcmFnZVV0aWwuYWRkV29yZCh3b3JkR3JvdXAsIHdvcmQpXG4gICAgdGhpcy50cmFuc2xhdGVTdGF0ZVRvKFN0YXRlRW51bS5XT1JEX0ZPTERfU1RBVEUpXG4gICAgdGhpcy5zZXREYXRhISh7XG4gICAgICBhZGRXb3JkOiAnJ1xuICAgIH0pXG4gICAgdGhpcy5mbHVzaFBhZ2VEYXRhKClcbiAgfSxcbiAgLyoqXG4gICAqIOW9k+WPlua2iOa3u+WKoOWNleivjeaMiemSrueCueWHu+eahOaXtuWAmVxuICAgKiDpnIDopoHlsIbnirbmgIHmlLnkuLrljZXor43liIbnu4TlsZXlvIDnirbmgIFcbiAgICog5bm25LiU5bCG6L6T5YWl55qE5Y2V6K+N572u5Li656m6XG4gICAqL1xuICBjYW5jZWxBZGRXb3JkKCkge1xuICAgIHRoaXMudHJhbnNsYXRlU3RhdGVUbyhTdGF0ZUVudW0uV09SRF9GT0xEX1NUQVRFKVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgYWRkV29yZDogJydcbiAgICB9KVxuICB9LFxuICAvKipcbiAgICog5om56YeP5re75Yqg5Y2V6K+N5oyJ6ZKu54K55Ye75LqL5Lu25aSE55CGXG4gICAqL1xuICB0b0FkZFdvcmRzKCl7XG4gICAgdGhpcy50cmFuc2xhdGVTdGF0ZVRvKFN0YXRlRW51bS5CQVRDSF9BRERfU1RBVEUpXG4gIH0sXG4gIC8qKlxuICAgKiDmibnph4/mt7vliqDljZXor43ovpPlhaXmoYbkuovku7blpITnkIZcbiAgICovXG4gIHRleHRBcmVhSW5wdXQoZTphbnkpe1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgdGV4dEFyZWFWYWx1ZTplLmRldGFpbC52YWx1ZSxcbiAgICAgIHRleHRBcmVhQ291bnQ6ZS5kZXRhaWwudmFsdWUubGVuZ3RoXG4gICAgfSlcbiAgfSxcbiAgLyoqXG4gICAqIOaJuemHj+a3u+WKoOWNleivje+8jOS/neWtmOaMiemSrueCueWHu+S6i+S7tuWkhOeQhlxuICAgKi9cbiAgc2F2ZUFkZFdvcmRzKCl7XG4gICAgbGV0IHdvcmRzOnN0cmluZyA9IHRoaXMuZGF0YS50ZXh0QXJlYVZhbHVlXG4gICAgbGV0IHdvcmRMaXN0OkFycmF5PHN0cmluZz4gPSBwYXJzZSh3b3JkcykuZGF0YVxuICAgIGxldCB3b3JkR3JvdXA6V29yZEdyb3VwID0gbmV3IFdvcmRHcm91cCgpXG4gICAgd29yZEdyb3VwLnNldElkKHRoaXMuZGF0YS5ncm91cGlkKVxuICAgIGZvcihsZXQgaT0wO2k8d29yZExpc3QubGVuZ3RoO2krKyl7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHdvcmRMaXN0W2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGxldCB3b3JkOiBXb3JkID0gd29yZExpc3RbaV1bal1cbiAgICAgICAgU3RvcmFnZVV0aWwuYWRkV29yZCh3b3JkR3JvdXAsIHdvcmQpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMudHJhbnNsYXRlU3RhdGVUbyhTdGF0ZUVudW0uV09SRF9GT0xEX1NUQVRFKVxuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgdGV4dEFyZWFDb3VudDowLFxuICAgICAgdGV4dEFyZWFWYWx1ZTonJ1xuICAgIH0pXG4gICAgdGhpcy5mbHVzaFBhZ2VEYXRhKClcbiAgfSwgXG4gIC8qKiAgXG4gICAqIOaJuemHj+a3u+WKoOWNleivje+8jOWPlua2iOaMiemSrueCueWHu+S6i+S7tuWkhOeQhlxuICAgKi9cbiAgY2FuY2VsQWRkV29yZHMoKXtcbiAgICB0aGlzLnRyYW5zbGF0ZVN0YXRlVG8oU3RhdGVFbnVtLldPUkRfRk9MRF9TVEFURSlcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHRleHRBcmVhQ291bnQ6MCxcbiAgICAgIHRleHRBcmVhVmFsdWU6JydcbiAgICB9KVxuICB9LFxuICAvKipcbiAgICog5Y675Yig6Zmk5Y2V6K+N5YiG57uE6aG16Z2iXG4gICAqL1xuICB0b0RlbGV0ZVdvcmRHcm91cCgpe1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOicuLi9kZWxldGUvZGVsZXRlJ1xuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDljrvliKDpmaTljZXor43nlYzpnaJcbiAgICovXG4gIHRvRGVsZXRlV29yZCgpIHtcbiAgICBsZXQgdGhhdDphbnkgPSB0aGlzXG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6ICcuLi9kZWxldGUvZGVsZXRlP2dyb3VwaWQ9Jyt0aGF0LmRhdGEuZ3JvdXBpZFxuICAgIH0pXG4gIH0sXG4gIC8qKlxuICAgKiDljrvlkKzlhpnnlYzpnaJcbiAgICovXG4gIGxpc3Rlbigpe1xuICAgIGxldCB0aGF0OmFueSA9IHRoaXNcbiAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgIHVybDogJy4uL2xpc3Rlbi9saXN0ZW4/Z3JvdXBpZD0nK3RoYXQuZGF0YS5ncm91cGlkXG4gICAgfSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfSxcbiAgLyoqXG4gICAqIOWOu+WNleivjeaEj+aAneeVjOmdolxuICAgKi9cbiAgbWVhbihlOmFueSl7XG4gICAgbGV0IHdvcmQ6V29yZCA9IGUuY3VycmVudFRhcmdldC5pZFxuICAgIGxldCBncm91cGlkOnN0cmluZyA9IHRoaXMuZGF0YS5ncm91cGlkXG4gICAgd3gubmF2aWdhdGVUbyh7XG4gICAgICB1cmw6Jy4uL21lYW4vbWVhbj9ncm91cGlkPScrZ3JvdXBpZCsnJndvcmQ9Jyt3b3JkXG4gICAgfSlcbiAgfSxcbiAgLyoqXG4gICAqIOeUqOaIt+eCueWHu+WPs+S4iuinkuWIhuS6q1xuICAgKi9cbiAgb25TaGFyZUFwcE1lc3NhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6ICfmr4/kuIDmrKHlkKzlhpnvvIzkuLrkuobnprvmoqbmg7Pmm7Tov5EnLFxuICAgICAgcGF0aDogJy9wYWdlcy9pbmRleC9pbmRleCcsXG4gICAgICBpbWFnZVVybDogXCJodHRwOi8vaW1nMS5waC4xMjYubmV0L2d0aWdXRVZsQTZYYlhFOWFGckIwZXc9PS8yMDk4MTE0NDc2NTAxOTIzMDExLmpwZ1wiXG4gICAgfVxuICB9XG59KVxuXG4iXX0=